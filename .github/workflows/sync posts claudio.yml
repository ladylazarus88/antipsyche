name: ðŸ“¥ Sync Posts Claudio

on:
  schedule:
    - cron: '*/30 * * * *'  # Ogni 30 minuti
  workflow_dispatch:         # Trigger manuale

permissions:
  contents: write

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        
      - name: â¬‡ï¸ Get posts
        run: |
          git clone --depth=1 https://github.com/ladylazarus88/antipsyche-post.git source
          
      - name: ðŸ“„ Copy to blog
        run: |
          mkdir -p src/content/blog
          cp source/posts/*.md src/content/blog/ 2>/dev/null || true
          
      - name: ðŸ’¾ Save changes
        run: |
          git config user.name "Auto-Sync"
          git config user.email "auto-sync@noreply.github.com"
          git add src/content/blog/
          git commit -m "ðŸ”„ Posts sync: $(date +'%Y-%m-%d %H:%M')" || echo "No changes"
          git push
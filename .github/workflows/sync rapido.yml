name: ‚ö° Quick Sync Test

on: workflow_dispatch

jobs:
  sync-test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        
      - name: üîç Test copy to src/content/blog
        run: |
          # Crea struttura
          mkdir -p src/content/blog
          
          # Prova a scaricare un file di esempio
          echo "Provo a scaricare dalla cartella posts/ del collaboratore..."
          
          # Usa GitHub API per vedere cosa c'√®
          curl -s "https://api.github.com/repos/ladylazarus88/antipsyche-post/contents/posts" \
            | jq -r '.[] | "  - \(.name)"'
            
          # Clona e copia
          git clone --depth=1 https://github.com/ladylazarus88/antipsyche-post.git tmp
          
          if [ -d "tmp/posts" ]; then
            cp tmp/posts/*.md src/content/blog/ 2>/dev/null || true
            echo "‚úÖ Copiati $(ls src/content/blog/*.md 2>/dev/null | wc -l) file"
            ls src/content/blog/
          else
            echo "‚ùå Nessuna cartella posts/ trovata"
            ls tmp/
          fi
          
          rm -rf tmp